# Vatic #

Vatic is a Python package for running simulations of a power grid using the
[PJM](https://www.e-education.psu.edu/ebf483/node/814) framework consisting
of alternating unit commitment (UC) and economic dispatch (ED) steps. Vatic
has been designed as a lightweight adaptation of
[Prescient](https://github.com/grid-parity-exchange/Prescient); it likewise
applies mixed-integer linear programming optimization implemented in
[Pyomo](http://www.pyomo.org/) to power grid formulations created using
[Egret](https://github.com/grid-parity-exchange/Egret).


## Installing Vatic ##

After making sure you have Python 3.8 installed, clone the repository using
one of the following commands:

```git clone https://github.com/PrincetonUniversity/Vatic.git```

```git clone git@github.com:PrincetonUniversity/Vatic.git```

Then, from inside the cloned directory, install Vatic:
```
cd Vatic
pip install .
```


## Running Vatic ##

Installing Vatic adds the command `vatic-det` to your command line
namespace. The simplest way to invoke this command is:

```vatic-det $input-dir $start-date $num-days ```

`input_dir` is the directory storing the dataset to be used for the run.
This directory should be structured in the same way as *e.g.* directories
downloaded using the Prescient downloaders. Thus you can use directories
generated by these downloaders, such as ```Prescient/downloads/texas-7k```,
as `input_dir`.

`output_dir` is where the output will be stored, which will consist of a copy
of `input_dir` along with any generated scenarios.

In addition to these required arguments, `vatic-det` accepts the following
optional arguments:

`--solver` The solver to use for RUC and SCED instances, such as `cbc` or
`gurobi`. The default is `cbc`; note that you may have to install your
preferred solver separately.

`--threads` The number of compute cores to be used for parallelization.
If you are running `vatic-det` on a remote compute cluster, do not use
more cores than what has been allocated to you for a particular job.
The default value is 1, which will not parallelize any computation. Must be
a non-negative integer; a value of 0 will instruct the solvers to use all
possible nodes, which is not recommended when running on remote clusters.

`--sced-horizon` How far ahead in hours each security-constrained economic
dispatch instance will look ahead. Must be a positive integer; the default
value is 4.

`--ruc-mipgap` The relative optimality gap used by each reliability unit
commitment instance to decide when to terminate. Expressed as a ratio
of the difference between the lower and upper objective bound and the
incumbent objective value. The default value is 0.01.

`--solver-args` A list of arguments to modify the behaviour of the solver
used for RUCs and SCEDs. These should be given in the format
```--solver-args arg1=x arg2=y arg3=z ...```. For example, if you are using
Gurobi, you might specify ```--solver-args Cuts=1 Presolve=1 Heuristics=0.03```.
